<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.9.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">



<!-- begin SEO -->









<title>Custom Jekyll plugins on github-pages - JESCHOLL</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="JESCHOLL">
<meta property="og:title" content="Custom Jekyll plugins on github-pages">


  <link rel="canonical" href="https://jescholl.com/automation/using-custom-jekyll-plugins-on-github/">
  <meta property="og:url" content="https://jescholl.com/automation/using-custom-jekyll-plugins-on-github/">



  <meta property="og:description" content="How to use custom Jekyll plugins and still host your site on Github.">



  <meta name="twitter:site" content="@jescholl">
  <meta name="twitter:title" content="Custom Jekyll plugins on github-pages">
  <meta name="twitter:description" content="How to use custom Jekyll plugins and still host your site on Github.">
  <meta name="twitter:url" content="https://jescholl.com/automation/using-custom-jekyll-plugins-on-github/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2018-01-24T00:00:00-08:00">
  
  
    <link rel="prev" href="https://jescholl.com/general/im-in-ops/" title="I&#39;m in ops">
  





  <script type="application/ld+json">
    {
      "@context" : "https://schema.org",
      "@type" : "Person",
      "name" : "Jason Scholl",
      "url" : "https://jescholl.com",
      "sameAs" : ["https://github.com/jescholl","https://twitter.com/jescholl","https://keybase.io/jescholl"]
    }
  </script>






<!-- end SEO -->


<link href="https://jescholl.com/feed.xml" type="application/atom+xml" rel="alternate" title="JESCHOLL Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://jescholl.com/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png?v=7kkOzmnx2k">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32.png?v=7kkOzmnx2k" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16.png?v=7kkOzmnx2k" sizes="16x16">
<link rel="manifest" href="/images/favicon/manifest.json?v=7kkOzmnx2k">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg?v=7kkOzmnx2k" color="#5bbad5">
<link rel="shortcut icon" href="/images/favicon/favicon.ico?v=7kkOzmnx2k">
<meta name="msapplication-config" content="/images/favicon/browserconfig.xml?v=7kkOzmnx2k">
<meta name="theme-color" content="#ffffff">

<!-- end favicons. -->



<!-- start custom head snippets -->

<link type="text/css" rel="stylesheet" href="/assets/custom-ee4cd405f38eaf87c2cd7009931287e6ac50e41b656603409c1eb9d4384c6b95.css">


<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://jescholl.com/">JESCHOLL</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://jescholl.com/categories" >Categories</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://jescholl.com/archive" >Archive</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://jescholl.com/about" >About</a>
            </li>
          
        </ul>
        
        <button class="greedy-nav__toggle" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://jescholl.com/images/bio-photo.png?v=7kkOzmnx2k" alt="Jason Scholl" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Jason Scholl</h3>
    
    
      <p class="author__bio" itemprop="description">
        Network Engineer, Linux Administrator, Rubyist, Finance Nerd
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Portland, OR</span>
        </li>
      

      

      

      
        <li>
          <a href="https://keybase.io/jescholl" itemprop="sameAs">
            <i class="fas fa-fw fa-key" aria-hidden="true"></i> Keybase
          </a>
        </li>
      

      
        <li>
          <a href="https://twitter.com/jescholl" itemprop="sameAs">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/jescholl" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Custom Jekyll plugins on github-pages">
    <meta itemprop="description" content="How to use custom Jekyll plugins and still host your site on Github.">
    <meta itemprop="datePublished" content="January 24, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Custom Jekyll plugins on github-pages
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Github-pages is fantastic, they provide free hosting for static sites, or Jekyll
sites that stick to the list of <a href="https://pages.github.com/versions/">whitelisted gems</a>.
Traditional wisdom is that if you want to use Jekyll with plugins Github doesn’t allow,
you need to host it on Amazon’s S3, or some other platform that isn’t as restrictive as github.</p>

<p>I am cheap, and don’t want to pay for hosting, so instead I chose to build my site
in Circleci and have CircleCI push the static files up to Github.  To do this, I needed to
create a branch (or it could be its own repo) to store the static files generated by Jekyll.
I chose to use <code class="highlighter-rouge">master</code> for static files, and <code class="highlighter-rouge">develop</code> for all the Jekyll code
because github’s user-pages must be on the <code class="highlighter-rouge">master</code> branch.</p>

<p>The first step is just to get your site building in CircleCI.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># .circleci/config.yml</span>
<span class="na">version</span><span class="pi">:</span> <span class="s">2.0</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">circleci/ruby:2.4.3</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">checkout</span>
      <span class="pi">-</span> <span class="na">restore_cache</span><span class="pi">:</span>
          <span class="na">keys</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">v1-bundle-\{\{ checksum "Gemfile.lock" \}\}</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">bundle install --path vendor/bundle</span>
      <span class="pi">-</span> <span class="na">save_cache</span><span class="pi">:</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">v1-bundle-\{\{ checksum "Gemfile.lock" \}\}</span>
          <span class="na">paths</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">vendor/bundle</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Install Prerequisites</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">sudo</span><span class="nv"> </span><span class="s">apt-get</span><span class="nv"> </span><span class="s">update;</span><span class="nv"> </span><span class="s">sudo</span><span class="nv"> </span><span class="s">apt-get</span><span class="nv"> </span><span class="s">install</span><span class="nv"> </span><span class="s">-y</span><span class="nv"> </span><span class="s">rsync"</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> 
          <span class="na">name</span><span class="pi">:</span> <span class="s">Build Site</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s">JEKYLL_ENV=production bundle exec jekyll build</span>
      <span class="pi">-</span> <span class="na">store_artifacts</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">_site</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">/</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s">_scripts/deploy.sh</span>
</code></pre></div></div>

<p>This simple CircleCI 2.0 config will build a Jekyll site in ruby 2.4.3, store
the static files as build artifacts, cache the installed gems to speed up future
builds, and finally run a script to deploy it.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># _scripts/deploy.sh</span>

<span class="nv">DEPLOY_DIR</span><span class="o">=</span><span class="k">$(</span>mktemp <span class="nt">-d</span><span class="k">)</span>
<span class="nv">BUILD_DIR</span><span class="o">=</span><span class="k">$(</span>readlink <span class="nt">-f</span> <span class="s2">"./_site"</span><span class="k">)</span>

<span class="c"># clone target repo to a temp dir to ensure no name collisions</span>
git clone <span class="nv">$CIRCLE_REPOSITORY_URL</span> <span class="nv">$DEPLOY_DIR</span>
<span class="nb">cd</span> <span class="nv">$DEPLOY_DIR</span>

<span class="c"># verify clean repo</span>
git fetch origin
git checkout master

<span class="c"># configure git commiter</span>
git config <span class="nt">--global</span> user.name CI
git config <span class="nt">--global</span> user.email ci@example.com

<span class="c">#copy compiled site from artifacts</span>
rsync <span class="nt">-a</span> <span class="nt">--delete</span> <span class="nt">--exclude</span><span class="o">=</span>.git <span class="nv">$BUILD_DIR</span>/ <span class="nb">.</span>

<span class="c"># commit changes</span>
git add <span class="nt">-A</span>
git commit <span class="nt">-m</span> <span class="s2">"Deployed in CI: </span><span class="nv">$CIRCLE_BUILD_URL</span><span class="s2">"</span>
git push origin master

<span class="c"># ping search engines with new sitemap</span>
curl <span class="s2">"http://www.google.com/webmasters/sitemaps/ping?sitemap=https://www.example.com/sitemap.xml"</span>
</code></pre></div></div>

<p>The script simply clones the repo, checks out the <code class="highlighter-rouge">master</code> branch, syncs it with
the output from the build step, and commits it with a link to the build on CircleCI.</p>

<p>After creating a checkout key in CircleCI with write access to your repo, you are
now free to use any gems you like and Github will host it for free.</p>

<p class="notice--info">As an extra bonus you can add extra features like spell check, HTML validation, or a
safety check to verify that you don’t accidentally add commits to the wrong branch.</p>

        
      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://jescholl.com/categories/#automation" class="page__taxonomy-item" rel="tag">automation</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-01-24T00:00:00-08:00">January 24, 2018</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=jescholl&text=Custom+Jekyll+plugins+on+github-pages%20https%3A%2F%2Fjescholl.com%2Fautomation%2Fusing-custom-jekyll-plugins-on-github%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjescholl.com%2Fautomation%2Fusing-custom-jekyll-plugins-on-github%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https%3A%2F%2Fjescholl.com%2Fautomation%2Fusing-custom-jekyll-plugins-on-github%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fjescholl.com%2Fautomation%2Fusing-custom-jekyll-plugins-on-github%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      


  <nav class="pagination">
    
      <a href="https://jescholl.com/general/im-in-ops/" class="pagination--pager" title="I’m in ops
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>


    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a Comment</h4>
      <section id="disqus_thread"></section>
    
</div>
    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://jescholl.com/images/monitorama-2016.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://jescholl.com/general/im-in-ops/" rel="permalink">I’m in ops
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">A discussion about job titles in tech and why no one likes them
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://jescholl.com/images/portland_home_values.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://jescholl.com/finance/short-selling-houses/" rel="permalink">Short Selling Houses
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">An exploration of the profitability of short selling houses.
</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/jescholl"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="https://github.com/jescholl"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="https://jescholl.com/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Jason Scholl. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="https://jescholl.com/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>







  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77377710-1', 'auto');
  ga('send', 'pageview');
</script>






    

  <script>
  
  var disqus_config = function () {
  this.page.url = "https://jescholl.com/automation/using-custom-jekyll-plugins-on-github/";
   this.page.identifier = "20180124"; 
  };

  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//jescholl.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>